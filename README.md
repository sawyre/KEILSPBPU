
- [Краткое содержание курса](#%D0%BA%D1%80%D0%B0%D1%82%D0%BA%D0%BE%D0%B5-%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D1%83%D1%80%D1%81%D0%B0)
- [Как выставляются оценки](#%D0%BA%D0%B0%D0%BA-%D0%B2%D1%8B%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D1%8F%D1%8E%D1%82%D1%81%D1%8F-%D0%BE%D1%86%D0%B5%D0%BD%D0%BA%D0%B8)
- [Как сдавать домашние задания](#%D0%BA%D0%B0%D0%BA-%D1%81%D0%B4%D0%B0%D0%B2%D0%B0%D1%82%D1%8C-%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D0%B8%D0%B5-%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F)
- [Вы нашли ошибку, неточность или хотите что-то поменять?](#%D0%B2%D1%8B-%D0%BD%D0%B0%D1%88%D0%BB%D0%B8-%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D1%83-%D0%BD%D0%B5%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C-%D0%B8%D0%BB%D0%B8-%D1%85%D0%BE%D1%82%D0%B8%D1%82%D0%B5-%D1%87%D1%82%D0%BE-%D1%82%D0%BE-%D0%BF%D0%BE%D0%BC%D0%B5%D0%BD%D1%8F%D1%82%D1%8C)
- [Описание шаблона проекта](#%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B0-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0)
- [Как проверяются отступы](#%D0%BA%D0%B0%D0%BA-%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D1%8F%D1%8E%D1%82%D1%81%D1%8F-%D0%BE%D1%82%D1%81%D1%82%D1%83%D0%BF%D1%8B)
    - [Допустимые стили](#%D0%B4%D0%BE%D0%BF%D1%83%D1%81%D1%82%D0%B8%D0%BC%D1%8B%D0%B5-%D1%81%D1%82%D0%B8%D0%BB%D0%B8)
        - [Стиль java:](#%D1%81%D1%82%D0%B8%D0%BB%D1%8C-java)
        - [Стиль allman:](#%D1%81%D1%82%D0%B8%D0%BB%D1%8C-allman)
- [Литература и полезные ссылки](#%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%B0-%D0%B8-%D0%BF%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8)

# Краткое содержание курса

Официальное название предмета - "Микропроцессоры", но на самом деле мы изучаем программирование микроконтроллеров на примере 32-битного микроконтроллера stm32f103rc на ядре ARM Cortex-M3.  

Код мы пишем в uVision Keil.

В прошлом семестре (который пока что живет на другом ресурсе - вот [тут](http://dl.avalon.ru/course/view.php?id=315)) мы изучали ассемблер, в этом семестре - периферию микроконтроллера.

# Как выставляются оценки

Оценки выставляются за домашние задания. Каждое задание представляет собой спецификацию к программе, которую нужно реализовать. За каждое задание можно получить 10 баллов; в некоторых заданиях можно получить дополнительные баллы.  
На выполнение каждого задания студенту дается 2 недели, за каждую неделю опоздания снимается 2 балла.  

Несмотря на то, что срок сдачи проверяет скрипт, оценку выставляет преподаватель, поэтому за опоздания в пределах нескольких часов баллы не снимаются.

На выполнение каждого задания дается 3 попытки.

За копирование кода у других студентов выставляется оценка в 0 баллов без права на исправление и выдается индивидуальное задание.

Код с неправильно расставленными отступами не принимается и не оценивается. Список допустимых стилей расстановки отступов с пояснениями находится [здесь](#%D0%B4%D0%BE%D0%BF%D1%83%D1%81%D1%82%D0%B8%D0%BC%D1%8B%D0%B5-%D1%81%D1%82%D0%B8%D0%BB%D0%B8).

# Как сдавать домашние задания

При появлении нового задания каждому студенту на почту приходит оповещение следующего вида:
> @roman-khazanskii has invited you to collaborate on the spbstu-microprocessors/assignment_1_student_name repository

Приняв приглашение, студент получает доступ к персональному репозиторию для одного задания. В этом репозитории находится шаблон проекта, структура которого описана в разделе **ЧЧЧЧЧЧЧЧ**

Для выполнения задания студенту нужно клонировать этот репозиторий и переключиться в ветку `student`:  
`git clone <repository-url> -b student`

Теперь студент может писать код и проверять его, делать коммиты и пуши.

Для сдачи задания студенту необходимо сделать pull-request своей ветки в ветку master. Для этого необходимо **ХХХХХ**

Каждый коммит в ветку student будет проверен системой непрерывной интеграции (circle-ci); в данный момент проверяются:  
* Дата и время попытки
* Стиль расстановки отступов

Если проверка прошла успешно, студент увидит **вот это**, а если нет - **вот это**. При желании, студент может посмотреть логи проверки и узнать, что же пошло не так. Для этого необходимо **тыц**

Поскольку скрипты не были проверены слишком тщательно, вероятность ошибочных проверок достаточно велика, поэтому провал/успех проверки не гарантирует ничего со стопроцентной вероятностью; просто так жить немного легче.

Далее каждый pull-request проверяется преподавателем; отзыв преподавателя размещается в комментариях. Если задание принято, то pull-request принимается и в файле `README.md` задания появляется оценка.  
Если задание не принято, то pull-request отклоняется.

# Вы нашли ошибку, неточность или хотите что-то поменять?

Если вы заметили ошибку в задании, в презентации, в коде проверочного скрипта и т.д., пожалуйста, создайте [issue](https://github.com/spbstu-microprocessors/lectures/issues)..

# Описание шаблона проекта

![project_template](.images/project_template.png)

Здесь:
* .circleci - папка для системы непрерывной интеграции; содержит:
    *  Dockerfile - файл с описанием образа системы, на которой выполняются тесты.
    *  config.yml - конфиг, в нем написано, какие тесты и когда запускать.
*  .test - папка с тестирующими скриптами. Проверяется дата сдачи и стиль кода.
*  .gitattributes - в этом файле описано, какие символы конца строки нужно использовать. Подробнее об этой проблеме можно почитать [здесь](http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/).
*  .gitignore - в этом файле перечислено, какие файлы гит будет игнорировать.
*  CODOWNERS - файл, благодаря которому преподаватель получает оповещение о каждом пулл-реквесте.

Все вышеперечисленные файлы и папки рекомендуется не менять, поскольку это сломает оповещение или автоматические проверки. При отправке пулл-реквеста преподавателю видны все изменения во всех файлах :)

*  src - в этой папке должны размещаться все файлы с исходным кодом
*  example.uvproj - файл проекта для среды разработки.

# Как проверяются отступы

Найти программы для автоматической проверки стиля кода не удалось, только программы для автоматической *коррекции* стиля. Поэтому проверка осуществляется самым простым способом - с помощью программы `astyle` скрипт генерирует несколько правильных вариантов и последовательно сравнивает исходный вариант с ними.
При обнаружении полного совпадения стиль признается допустимым.
При отсутствии такого совпадения стиль признается недопустимым.

Что же помешает студенту заранее запустить `astyle` и исправить свой стиль?..

## Допустимые стили

`astyle` обладает значительным количеством поддерживаемых стилей, из которого были выбраны стиль "java" и стиль "allman"; для каждого стиля допускается использование 2 пробелов, 4 пробелов или символа табуляции (но не вперемешку).

### Стиль java:
```
if (isAwesome) { <-- обратите внимание на пробел перед фигурной скобкой!
  return true;
}
```

### Стиль allman:
```
if (isAwesome)
{
  return true;
}
```

Если вы хотите, чтобы какой-нибудь другой стиль тоже начал поддерживаться, пожалуйста, создайте [issue](https://github.com/spbstu-microprocessors/lectures/issues).

# Литература и полезные ссылки